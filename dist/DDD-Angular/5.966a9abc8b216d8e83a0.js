(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"g+Zp":function(n,l,t){"use strict";t.r(l);var u=t("CcnG"),e=function(){return function(){}}(),o=t("pMnS"),r=t("ZYCi"),i=t("Ip0R"),s=t("AytR"),c=t("6blF");function a(n,l){return new c.a(l?function(t){return l.schedule(h,0,{error:n,subscriber:t})}:function(l){return l.error(n)})}function h(n){n.subscriber.error(n.error)}var p=t("xMyE"),b=t("9Z1F"),d=t("t/Na"),f=function(){function n(n){this.http=n,this.apiUrl=s.a.api.url,this.v="v1",this.controller="users",this.url=this.apiUrl+"/"+(this.v?this.v+"/":"")+this.controller}return n.prototype.handleErrors=function(n){return a(n.error instanceof ErrorEvent?"An error occurred : "+n.error.message:"Server returne code : "+n.status+", error message is: "+n.message)},n.prototype.getShopListByUserId=function(n){return this.http.get(this.url+"/"+n+"/shops/").pipe(Object(p.a)((function(n){return console.log(n)})),Object(b.a)(this.handleErrors))},n.ngInjectableDef=u.Q({factory:function(){return new n(u.U(d.c))},token:n,providedIn:"root"}),n}(),g=function(){function n(n,l){var t=this;this.route=n,this.userService=l,this.userId="5e8fee7c3f216c24f3a302dd",this.shops=[],n.firstChild.params.subscribe((function(n){t.selectedShopId=n.id}))}return n.prototype.ngOnInit=function(){var n=this;this.userService.getShopListByUserId(this.userId).subscribe({next:function(l){n.takeShops(l)}})},n.prototype.takeShops=function(n){this.shops=n},n.prototype.onShopClick=function(n){this.selectedShopId=n},n}(),v=u.lb({encapsulation:0,styles:[[".list-shop-container[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#389466,#42b883);border-radius:6px;padding:16px 12px;height:100%;color:#fff}hr[_ngcontent-%COMP%]{border-top:1px solid #fff}.shop-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:50px auto;padding:6px;cursor:pointer;border-radius:8px;margin-bottom:4px;width:100%}.shop-item.g-selected[_ngcontent-%COMP%]{margin-left:20px}.shop-item[_ngcontent-%COMP%]:hover:not(.g-selected){background-color:#eee}.shop-img[_ngcontent-%COMP%]{height:50px}.shop-name[_ngcontent-%COMP%]{display:flex;padding:0 6px}.shop-name[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{align-self:center}"]],data:{}});function m(n){return u.Db(0,[(n()(),u.nb(0,0,null,null,7,"a",[],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==u.wb(n,1).onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)&&e),e}),null,null)),u.mb(1,671744,null,0,r.l,[r.k,r.a,i.i],{routerLink:[0,"routerLink"]},null),u.xb(2,2),(n()(),u.nb(3,0,null,null,4,"div",[],[[8,"className",0]],[[null,"click"]],(function(n,l,t){var u=!0;return"click"===l&&(u=!1!==n.component.onShopClick(n.context.$implicit._id)&&u),u}),null,null)),(n()(),u.nb(4,0,null,null,0,"div",[["class","shop-img"]],null,null,null,null,null)),(n()(),u.nb(5,0,null,null,2,"div",[["class","shop-name"]],null,null,null,null,null)),(n()(),u.nb(6,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),u.Bb(7,null,["",""]))],(function(n,l){var t=n(l,2,0,"/shops",l.context.$implicit._id);n(l,1,0,t)}),(function(n,l){var t=l.component;n(l,0,0,u.wb(l,1).target,u.wb(l,1).href),n(l,3,0,u.pb(1,"shop-item ",l.context.$implicit._id==t.selectedShopId?"g-selected":"","")),n(l,7,0,l.context.$implicit.shopName)}))}function y(n){return u.Db(0,[(n()(),u.nb(0,0,null,null,5,"div",[["class","list-shop-container"]],null,null,null,null,null)),(n()(),u.nb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),u.Bb(-1,null,["Shop"])),(n()(),u.nb(3,0,null,null,0,"hr",[],null,null,null,null,null)),(n()(),u.eb(16777216,null,null,1,null,m)),u.mb(5,278528,null,0,i.j,[u.M,u.J,u.r],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,5,0,l.component.shops)}),null)}var D=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),I=u.lb({encapsulation:0,styles:[[".shop-module-container[_ngcontent-%COMP%]{height:100%;display:grid;grid-template-columns:-webkit-min-content auto;grid-template-columns:min-content auto}.shop-list[_ngcontent-%COMP%]{width:200px;padding:12px}"]],data:{}});function M(n){return u.Db(0,[(n()(),u.nb(0,0,null,null,6,"div",[["class","shop-module-container"]],null,null,null,null,null)),(n()(),u.nb(1,0,null,null,2,"div",[["class","shop-list"]],null,null,null,null,null)),(n()(),u.nb(2,0,null,null,1,"d-list-shop",[],null,null,null,y,v)),u.mb(3,114688,null,0,g,[r.a,f],null,null),(n()(),u.nb(4,0,null,null,2,"div",[["class","shop-content"]],null,null,null,null,null)),(n()(),u.nb(5,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),u.mb(6,212992,null,0,r.n,[r.b,u.M,u.j,[8,null],u.h],null,null)],(function(n,l){n(l,3,0),n(l,6,0)}),null)}function O(n){return u.Db(0,[(n()(),u.nb(0,0,null,null,1,"d-shop-content",[],null,null,null,M,I)),u.mb(1,114688,null,0,D,[],null,null)],(function(n,l){n(l,1,0)}),null)}var S=u.jb("d-shop-content",D,O,{},{},[]),k=function(){function n(){}return n.prototype.ngOnInit=function(){},n}(),w=u.lb({encapsulation:0,styles:[[""]],data:{}});function C(n){return u.Db(0,[(n()(),u.nb(0,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),u.Bb(-1,null,[" all-shop-dashboard works!\n"]))],null,null)}function x(n){return u.Db(0,[(n()(),u.nb(0,0,null,null,1,"d-all-shop-dashboard",[],null,null,null,C,w)),u.mb(1,114688,null,0,k,[],null,null)],(function(n,l){n(l,1,0)}),null)}var P=u.jb("d-all-shop-dashboard",k,x,{},{},[]),j=function(){function n(n){this.http=n,this.apiUrl=s.a.api.url,this.controller="shops",this.url=this.apiUrl+"/"+(this.v?this.v+"/":"")+this.controller+"/"}return n.prototype.handleErrors=function(n){return a(n.error instanceof ErrorEvent?"An error occurred : "+n.error.message:"Server returne code : "+n.status+", error message is: "+n.message)},n.prototype.getShopRevenue=function(n,l){return this.http.get(this.url+"/"+n+"/revenues?onDate="+l.toDateString).pipe(Object(p.a)((function(n){return console.log(n)})),Object(b.a)(this.handleErrors))},n.ngInjectableDef=u.Q({factory:function(){return new n(u.U(d.c))},token:n,providedIn:"root"}),n}(),_=t("VNr4"),B=function(){function n(n){this.shopService=n,this.date=new Date,this.revenue=0,this.previousRevenue=0,this.increasementPercent=0}return n.prototype.ngOnInit=function(){},n.prototype.ngOnChanges=function(){console.log("changed"),this.onDate=new Date(this.date.getFullYear(),this.date.getMonth(),1),this.onlastMonthDate=new Date(this.date.getFullYear(),this.date.getMonth()-1,1),console.log(this.onDate,this.onlastMonthDate),this.loadData()},n.prototype.loadData=function(){var n=this.shopService.getShopRevenue(this.shopId,this.onDate),l=this.shopService.getShopRevenue(this.shopId,this.onlastMonthDate);Object(_.a)([n,l]).subscribe((function(n){console.log(n)}))},n}(),E=u.lb({encapsulation:0,styles:[[""]],data:{}});function U(n){return u.Db(0,[u.yb(0,i.e,[u.t]),u.yb(0,i.c,[u.t]),u.yb(0,i.n,[u.t]),(n()(),u.nb(3,0,null,null,2,"h2",[],null,null,null,null,null)),(n()(),u.Bb(4,null,["Revenue ",""])),u.zb(5,2),(n()(),u.nb(6,0,null,null,2,"h1",[],null,null,null,null,null)),(n()(),u.Bb(7,null,["",""])),u.zb(8,1),(n()(),u.nb(9,0,null,null,2,"h3",[],null,null,null,null,null)),(n()(),u.Bb(10,null,["",""])),u.zb(11,1)],null,(function(n,l){var t=l.component,e=u.Cb(l,4,0,n(l,5,0,u.wb(l,0),t.onDate,"MMM yyyy"));n(l,4,0,e);var o=u.Cb(l,7,0,n(l,8,0,u.wb(l,1),t.revenue));n(l,7,0,o);var r=u.Cb(l,10,0,n(l,11,0,u.wb(l,2),t.increasementPercent));n(l,10,0,r)}))}var F=t("mrSG"),R=function(n){function l(l){var t=n.call(this,l)||this;return t.route=l,t}return F.c(l,n),l.prototype.ngOnInit=function(){},l}(function(){function n(n){var l=this;n.params.subscribe((function(n){l.routeParamChanged(n)}))}return n.prototype.routeParamChanged=function(n){this.shopId=n.id},n}()),N=u.lb({encapsulation:0,styles:[[""]],data:{}});function L(n){return u.Db(0,[(n()(),u.nb(0,0,null,null,3,"div",[],null,null,null,null,null)),(n()(),u.Bb(1,null,[" "," "])),(n()(),u.nb(2,0,null,null,1,"shop-revenue",[],null,null,null,U,E)),u.mb(3,638976,null,0,B,[j],{shopId:[0,"shopId"]},null)],(function(n,l){n(l,3,0,l.component.shopId)}),(function(n,l){n(l,1,0,l.component.shopId)}))}function Z(n){return u.Db(0,[(n()(),u.nb(0,0,null,null,1,"d-shop-dashboard-page",[],null,null,null,L,N)),u.mb(1,114688,null,0,R,[r.a],null,null)],(function(n,l){n(l,1,0)}),null)}var $=u.jb("d-shop-dashboard-page",R,Z,{},{},[]),z=function(){return function(){}}();t.d(l,"ShopModuleNgFactory",(function(){return A}));var A=u.kb(e,[],(function(n){return u.ub([u.vb(512,u.j,u.Z,[[8,[o.a,S,P,$]],[3,u.j],u.w]),u.vb(4608,i.l,i.k,[u.t,[2,i.s]]),u.vb(1073742336,i.b,i.b,[]),u.vb(1073742336,r.m,r.m,[[2,r.s],[2,r.k]]),u.vb(1073742336,z,z,[]),u.vb(1073742336,e,e,[]),u.vb(1024,r.i,(function(){return[[{path:"",component:D,children:[{path:"",component:k},{path:":id",component:R}]}]]}),[])])}))}}]);